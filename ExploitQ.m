function [visitedStates, stateCords] = ExploitQ(Q,maze)
state = maze.stateStart;
stateID = maze.stateNumber(state(1,1),state(1,2));

%add starting state to visited states
visitedStates(1) = stateID;
stateCords(:,1)= state';
running=1;
steps=1;
while(running==1)

    %find action with highest q value
    r = Q(stateID, :);
    [~, action] = max(r);
  
    % get the next state due to that action
    nextState = maze.tm(stateID, action);
    
    % get the reward from the action on the current state
    reward = maze.RewardFunction(stateID, action);
    
    % update the state
    stateID = nextState;
    visitedStates(steps+1) = stateID;
    stateCords(1,steps+1) = maze.stateX(stateID);
    stateCords(2,steps+1) = maze.stateY(stateID); 

    % update steps
    steps = steps +1;
    % termination if reaches goal state
    if(reward == 10)
        running = 0;
    end
end
end

